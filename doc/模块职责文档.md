# AIHub-Frontend 模块职责文档

## 1. 核心组件

| 文件路径 | 职责描述 |
|----------|----------|
| `src/App.vue` | **根组件**：全局布局容器，管理侧边栏与聊天主界面的协同渲染 |
| `src/components/ChatComponent.vue` | **聊天主界面**：<br>• 消息列表渲染（区分用户/系统消息）<br>• Markdown 消息解析（marked.js）<br>• 会话生命周期管理（新建/切换/持久化）<br>• 输入框自适应高度逻辑 |
| `src/components/ChatComponentTopBar.vue` | **顶部操作栏**：<br>• 模型切换功能（kimi/gpt-4等）<br>• 预留扩展按钮（`@button2-click`/`@button3-click` 待实现） |
| `src/components/ChatInput.vue` | **输入交互层**：<br>• 基础消息输入与发送按钮触发<br>• 输入框样式管理（阴影/圆角优化） |
| `src/components/ChatSidebar.vue` | **会话导航面板**：<br>• 会话列表动态渲染（含删除操作）<br>• 新会话创建与路由跳转<br>• 会话状态同步（通过Vuex） |
| `src/components/LoginModal.vue` | **认证模块**：<br>• 登录表单验证（邮箱/手机号格式）<br>• 用户凭证存储（Token持久化）<br>• 登录状态全局同步（Vuex联动） |

## 2. 路由系统

| 文件路径 | 职责描述 |
|----------|----------|
| `src/router/index.js` | **路由中枢**：<br>• 定义 `/`（首页）与 `/s/:sessionId`（会话页）路由<br>• 实现会话页动态加载（路由懒加载） |

## 3. 状态管理

| 文件路径 | 职责描述 |
|----------|----------|
| `src/store/store.js` | **全局状态仓库**：<br>• 用户认证状态管理（Token/UserInfo）<br>• 模型选择状态机（selectedModel逻辑）<br>• 会话列表数据同步（CRUD操作）<br>• 浏览器存储持久化（vuex-persistedstate插件） |

## 4. 服务层

| 文件路径 | 职责描述 |
|----------|----------|
| `src/services/messageService.js` | **消息网关**：<br>• 多模态消息封装（FormData处理）<br>• 后端 `/chat` 接口对接<br>• 错误处理与重试机制 |

## 5. 辅助模块

| 文件路径 | 职责描述 |
|----------|----------|
| `src/event-bus/event-bus.js` | **跨组件通信总线**（推测用途）：<br>• 非父子组件事件传递（如登录状态变更广播） |
| `public/index.html` | **HTML入口模板**：Vue应用挂载容器基础结构 |

## 6. 待澄清项

- **`src/config/`空目录**  
  当前无配置文件，可能为占位目录或未来扩展预留

- **`ButtonBar`未实现功能**  
  代码中`@button2-click`/`@button3-click`事件暂未绑定具体逻辑

- **事件总线具体实现**  
  `event-bus.js`需确认是否用于会话更新通知等场景

## 7. 系统架构全景

```text
用户界面层 (Components)
  ├─ 聊天核心 (ChatComponent)
  ├─ 状态管理 (Vuex Store)
  └─ 路由系统 (Vue Router)
  
业务逻辑层 (Services)
  └─ 消息服务 (messageService)
  
基础设施层
  ├─ 持久化存储 (LocalStorage/SessionStorage)
  └─ API 网关 (Axios)